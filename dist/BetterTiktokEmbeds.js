const{components:o}=window.enmity;o.Alert,o.Button,o.FlatList,o.Image,o.ImageBackground,o.KeyboardAvoidingView,o.Modal,o.Pressable,o.RefreshControl;const y=o.ScrollView;o.SectionList,o.StatusBar,o.StyleSheet,o.Switch,o.Text,o.TextInput,o.TouchableHighlight,o.TouchableOpacity,o.TouchableWithoutFeedback,o.Touchable,o.View,o.VirtualizedList,o.Form,o.FormArrow,o.FormCTA,o.FormCTAButton,o.FormCardSection,o.FormCheckbox,o.FormDivider,o.FormHint,o.FormIcon,o.FormInput,o.FormLabel,o.FormRadio;const s=o.FormRow,a=o.FormSection;o.FormSelect,o.FormSubLabel;const p=o.FormSwitch;o.FormTernaryCheckBox,o.FormText,o.FormTextColors,o.FormTextSizes;function h(e){window.enmity.plugins.registerPlugin(e)}function k(e){return window.enmity.plugins.installPlugin(e)}function l(e,t,m){window.enmity.settings.set(e,t,m)}function c(e,t,m){return window.enmity.settings.get(e,t,m)}function b(e){return window.enmity.patcher.create(e)}var v="BetterTiktokEmbeds",S="1.0.0",F="Convert TikTok links to tt-embed.com links so the TikTok embed is better and can be played.",T=[{name:"spin",id:"308440976723148800"}],f="#ff0069",_="https://raw.githubusercontent.com/spinfal/enmity-plugins/master/dist/BetterTiktokEmbeds.js",w={name:v,version:S,description:F,authors:T,color:f,sourceUrl:_};window.enmity.modules.common.Constants,window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets;const C=window.enmity.modules.common.Messages;window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const n=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage,window.enmity.modules.common.Toasts;const E=window.enmity.modules.common.Dialog;window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users,window.enmity.modules.common.Navigation,window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking,window.enmity.modules.common.StyleSheet,window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes;function B(e,t){return window.enmity.modules.getModule(e,t)}window.enmity.modules.common;const{native:i}=window.enmity;function P(){i.reload()}i.version,i.build,i.device,i.version;var A=({pluginUrl:e})=>n.createElement(s,{label:"Update Plugin",trailing:s.Arrow,onPress:()=>{console.log(e),k(`${e}?${Math.floor(Math.random()*1001)}.js`),E.show({title:"Plugin Update",body:"Updating the plugin using this button will require you to reload Discord. Would you like to reload Discord now?",confirmText:"Yep!",cancelText:"Later",onConfirm:P})}});function d(e){return window.enmity.assets.getIDByName(e)}const u=B(e=>e.open!==void 0&&e.close!==void 0&&!e.openLazy&&!e.startDrag&&!e.init&&!e.openReplay&&!e.openChannelCallPopout),g=b("BTE"),L={...w,onStart(){try{c("_tiktok","_type",!1)||l("_tiktok","_type","tt-embed.com"),g.before(C,"sendMessage",(e,t,m)=>{const r=t[1].content;!r.match(/http(s)?:\/\/(www.)?tiktok.com\/(@\w{4,15}\/video\/\d+|\w{1}\/[a-zA-Z0-9_.-]{8,12})(\/)?/gim)||(t[1].content=c("_tiktok","_type",!1)==="tt-embed.com"?r.replace(/http(s)?:\/\/(www.)?tiktok.com/gim,"https://tt-embed.com/?q=https://tiktok.com"):r.replace(/http(s)?:\/\/(www.)?tiktok.com/gim,"https://vm.dstn.to"))})}catch(e){console.log("[ BetterTiktokEmbeds Error ]",e)}},onStop(){g.unpatchAll()},patches:[],getSettingsPanel({settings:e}){return n.createElement(y,{settings:e},n.createElement(a,{title:"Settings"},n.createElement(s,{label:"Use vm.dstn.to instead of tt-embed.com",leading:n.createElement(s.Icon,{source:d("toast_copy_link")}),trailing:n.createElement(p,{value:e.getBoolean("_tt-embed",!1),onValueChange:()=>{try{e.toggle("_tt-embed",!1),e.getBoolean("_tt-embed",!1)?l("_tiktok","_type","vm.dstn.to"):l("_tiktok","_type","tt-embed.com"),u.open({content:`Switched to ${c("_tiktok","_type",!1)}.`,source:d("check")})}catch(t){console.log("[ BetterTiktokEmbeds Error ]",t),u.open({content:"An error has occurred. Check debug logs for more info.",source:d("Small")})}}})})),n.createElement(a,{title:"Plugin"},n.createElement(A,{pluginUrl:w.sourceUrl})))}};h(L);
