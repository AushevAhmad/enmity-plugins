function f(n){window.enmity.plugins.registerPlugin(n)}function i(...n){return window.enmity.modules.getByProps(...n)}window.enmity.modules.common,window.enmity.modules.common.Constants,window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets;const r=window.enmity.modules.common.Messages;window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const S=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage,window.enmity.modules.common.Toasts,window.enmity.modules.common.Dialog,window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users,window.enmity.modules.common.Navigation,window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking,window.enmity.modules.common.StyleSheet,window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes;function v(n){return window.enmity.patcher.create(n)}var M="MessageSpoofer",A="1.1.2",_="Change what people say.",E=[{name:"NotMarek",id:"206299359007080450"}],P="#ff0069",b="https://raw.githubusercontent.com/notmarek/enmity-plugins/master/dist/MessageSpoofer.js",C={name:M,version:A,description:_,authors:E,color:P,sourceUrl:b};const N=i("getMessage","getMessages"),k=i("getChannel","getDMFromUserId"),t=v("message-spoofer"),l=i("openLazy"),L=i("_currentDispatchActionType","_subscriptions","_waitQueue"),R={...C,patches:[],onStart(){let n=!1;t.before(l,"openLazy",(c,[e,s])=>{s==="MessageLongPressActionSheet"&&e.then(o=>{let w=o.default;return o.default=function({message:d,user:u,channel:a,canAddNewReactions:y},p){let m=w({message:d,user:u,channel:a,canAddNewReactions:y},p);if(m.props.children.props.children.props.children[1][0].key=="69")return m;let g=m.props.children.props.children.props.children[1][0].type,h=S.createElement(g,{key:"69",onPressRow:T=>{l.hideActionSheet(),r.startEditMessage(`dirty-${a.id}`,d.id,d.content)},message:"Spoof edit",iconSource:582});return m.props.children.props.children.props.children[1].unshift(h),m},o})}),t.before(r,"startEditMessage",(c,e,s)=>{e[0].startsWith("dirty-")?(e[0]=e[0].replace("dirty-",""),n=!0):n=!1}),t.before(r,"editMessage",(c,e,s)=>{if(n){const o=N.getMessage(e[0],e[1]);L.dispatch({type:"MESSAGE_UPDATE",message:{...o,...e[2],edited_timestamp:o.editedTimestamp,mention_roles:o.mentionRoles,mention_everyone:o.mentionEveryone,member:o.author,guild_id:k.getChannel(o.channel_id).guild_id}}),e={}}})},onStop(){t.unpatchAll()}};f(R);
