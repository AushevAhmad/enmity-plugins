function m(t){window.enmity.plugins.registerPlugin(t)}function o(...t){return window.enmity.modules.getByProps(...t)}window.enmity.modules.common;function u(t){return window.enmity.patcher.create(t)}var p="NoDelete",_="1.1.3",h='Basic "Message Logger"',M=[{name:"NotMarek",id:"206299359007080450"}],f="#ff0069",y={name:p,version:_,description:h,authors:M,color:f};const a=u("NoDelete"),E={...y,patches:[],onStart(){const t=()=>{const r=o("getMessage","getMessages"),d=o("getChannel","getDMFromUserId"),i=o("_currentDispatchActionType","_subscriptions","_waitQueue");console.log("NoDelete delayed start.");const c=i._orderedActionHandlers.MESSAGE_DELETE.find(s=>s.name==="MessageStore"),g=i._orderedActionHandlers.MESSAGE_UPDATE.find(s=>s.name==="MessageStore");a.before(c,"actionHandler",(s,e)=>{const n=r.getMessage(e[0].channelId,e[0].id);if(e[0]={},!n.editedTimestamp||n.editedTimestamp._isValid){const l={type:"MESSAGE_UPDATE",message:{...n,edited_timestamp:"invalid_timestamp",content:n.content+" `[deleted]`",guild_id:d.getChannel(n.channel_id).guild_id}};i.dispatch(l)}}),a.before(g,"actionHandler",(s,e)=>{try{const n=r.getMessage(e[0].message.channel_id,e[0].message.id);try{if(!e[0].edited_timestamp._isValid)return}catch{}e[0].message.content=n.content+" `[edited]`\n"+e[0].message.content;return}catch{}})};setTimeout(()=>{t()},300)},onStop(){a.unpatchAll()}};m(E);
