function d(t){window.enmity.plugins.registerPlugin(t)}function g(t,n){return window.enmity.modules.getModule(t,n)}function s(...t){return window.enmity.modules.getByProps(...t)}window.enmity.modules.common;function m(t){return window.enmity.patcher.create(t)}var c="NoDelete",l="1.0.0",u='Basic "Message Logger"',p=[{name:"NotMarek",id:"206299359007080450"}],h="#ff0069",y={name:c,version:l,description:u,authors:p,color:h};const i=s("getMessage","getMessages"),o=s("getChannel","getDMFromUserId"),_=s("getLastSelectedChannelId"),M=g(t=>t.dispatch&&!t.getCurrentUser),a=m("logger"),f={...y,patches:[],onStart(){a.before(M,"dispatch",(t,n,E)=>{if(n[0].type==="MESSAGE_UPDATE"&&n[0].message.content!==void 0){const e=o.getChannel(_.getChannelId()).guild_id;if(n[0].message.guild_id!==e)return;const r=i.getMessage(n[0].message.channel_id,n[0].message.id);n[0].message.content=r.content+" `[edited]`\n"+n[0].message.content;return}if(n[0].type==="MESSAGE_DELETE"){const e=i.getMessage(n[0].channelId,n[0].id);n[0].type="MESSAGE_UPDATE",n[0].message={type:e.type,tts:e.tts,timestamp:e.timestamp,pinned:e.pinned,mentions:e.mentions,mention_roles:e.mentionRoles,mention_everyone:e.mentionEveryone,member:e.author,id:e.id,flags:e.flags,embeds:e.embeds,edited_timestamp:e.editedTimestamp,content:e.content+" `[deleted]`",components:e.components,channel_id:e.channel_id,author:e.author,attachments:e.originalMessage,guild_id:o.getChannel(e.channel_id).guild_id};return}})},onStop(){a.unpatchAll()}};d(f);
