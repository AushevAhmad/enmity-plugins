function g(t){window.enmity.plugins.registerPlugin(t)}function a(...t){return window.enmity.modules.getByProps(...t)}window.enmity.modules.common;function m(t){return window.enmity.patcher.create(t)}var l="NoDelete",p="1.1.0",u='Basic "Message Logger"',_=[{name:"NotMarek",id:"206299359007080450"}],E="#ff0069",h={name:l,version:p,description:u,authors:_,color:E};const r=a("getMessage","getMessages"),M=a("getChannel","getDMFromUserId"),i=a("_currentDispatchActionType","_subscriptions","_waitQueue"),o=m("NoDelete"),S={...h,patches:[],onStart(){for(const n of["MESSAGE_UPDATE","MESSAGE_DELETE"])try{i.dispatch({type:n,message:{}})}catch{}const t=i._orderedActionHandlers.MESSAGE_DELETE.find(n=>n.name==="MessageStore"),d=i._orderedActionHandlers.MESSAGE_UPDATE.find(n=>n.name==="MessageStore");o.before(t,"actionHandler",(n,e)=>{const s=r.getMessage(e[0].channelId,e[0].id);if(e[0]={},!s.editedTimestamp||s.editedTimestamp._isValid){const c={type:"MESSAGE_UPDATE",message:{...s,edited_timestamp:"invalid_timestamp",content:s.content+" `[deleted]`",guild_id:M.getChannel(s.channel_id).guild_id}};i.dispatch(c)}}),o.before(d,"actionHandler",(n,e)=>{try{const s=r.getMessage(e[0].message.channel_id,e[0].message.id);try{if(!e[0].edited_timestamp._isValid)return}catch{}e[0].message.content=s.content+" `[edited]`\n"+e[0].message.content;return}catch{}})},onStop(){o.unpatchAll()}};g(S);
