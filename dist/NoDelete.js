function u(t){window.enmity.plugins.registerPlugin(t)}function i(...t){return window.enmity.modules.getByProps(...t)}window.enmity.modules.common;function p(t){return window.enmity.patcher.create(t)}var _="NoDelete",E="1.1.4",h='Basic "Message Logger"',y=[{name:"NotMarek",id:"206299359007080450"}],M="#ff0069",S={name:_,version:E,description:h,authors:y,color:M};const o=p("NoDelete"),A={...S,patches:[],onStart(){const t=i("_currentDispatchActionType","_subscriptions","_waitQueue"),d=()=>{const r=i("getMessage","getMessages"),c=i("getChannel","getDMFromUserId"),a=i("_currentDispatchActionType","_subscriptions","_waitQueue");console.log("NoDelete delayed start.");const g=a._orderedActionHandlers.MESSAGE_DELETE.find(s=>s.name==="MessageStore"),m=a._orderedActionHandlers.MESSAGE_UPDATE.find(s=>s.name==="MessageStore");o.before(g,"actionHandler",(s,e)=>{const n=r.getMessage(e[0].channelId,e[0].id);if(e[0]={},!n.editedTimestamp||n.editedTimestamp._isValid){const l={type:"MESSAGE_UPDATE",message:{...n,edited_timestamp:"invalid_timestamp",content:n.content+" `[deleted]`",guild_id:c.getChannel(n.channel_id).guild_id}};a.dispatch(l)}}),o.before(m,"actionHandler",(s,e)=>{try{const n=r.getMessage(e[0].message.channel_id,e[0].message.id);try{if(!e[0].edited_timestamp._isValid)return}catch{}e[0].message.content=n.content+" `[edited]`\n"+e[0].message.content;return}catch{}})};t.dispatch({type:"MESSAGE_UPDATE",message:{edited_timestamp:"",content:"",guild_id:"0000000"}}),t.dispatch({type:"MESSAGE_DELETE",message:{channel_id:"",id:""}}),setTimeout(()=>{d()},300)},onStop(){o.unpatchAll()}};u(A);
