function g(t){window.enmity.plugins.registerPlugin(t)}function s(...t){return window.enmity.modules.getByProps(...t)}window.enmity.modules.common;function m(t){return window.enmity.patcher.create(t)}var l="NoDelete",u="1.1.2",p='Basic "Message Logger"',_=[{name:"NotMarek",id:"206299359007080450"}],h="#ff0069",f={name:l,version:u,description:p,authors:_,color:h};const r=s("getMessage","getMessages"),M=s("getChannel","getDMFromUserId"),o=s("_currentDispatchActionType","_subscriptions","_waitQueue"),a=m("NoDelete"),E={...f,patches:[],onStart(){const t=o._orderedActionHandlers.MESSAGE_DELETE.find(i=>i.name==="MessageStore");if(!t){console.error("MessageDelete not found"),setTimeout(this.onStart,300);return}const d=o._orderedActionHandlers.MESSAGE_UPDATE.find(i=>i.name==="MessageStore");a.before(t,"actionHandler",(i,e)=>{const n=r.getMessage(e[0].channelId,e[0].id);if(e[0]={},!n.editedTimestamp||n.editedTimestamp._isValid){const c={type:"MESSAGE_UPDATE",message:{...n,edited_timestamp:"invalid_timestamp",content:n.content+" `[deleted]`",guild_id:M.getChannel(n.channel_id).guild_id}};o.dispatch(c)}}),a.before(d,"actionHandler",(i,e)=>{try{const n=r.getMessage(e[0].message.channel_id,e[0].message.id);try{if(!e[0].edited_timestamp._isValid)return}catch{}e[0].message.content=n.content+" `[edited]`\n"+e[0].message.content;return}catch{}})},onStop(){a.unpatchAll()}};g(E);
