function g(t){window.enmity.plugins.registerPlugin(t)}function a(...t){return window.enmity.modules.getByProps(...t)}window.enmity.modules.common;function m(t){return window.enmity.patcher.create(t)}var l="NoDelete",p="1.1.1",_='Basic "Message Logger"',u=[{name:"NotMarek",id:"206299359007080450"}],E="#ff0069",h={name:l,version:p,description:_,authors:u,color:E};const d=a("getMessage","getMessages"),M=a("getChannel","getDMFromUserId"),s=a("_currentDispatchActionType","_subscriptions","_waitQueue"),o=m("NoDelete"),S={...h,patches:[],onStart(){s.dispatch({type:"MESSAGE_UPDATE",message:{edited_timestamp:"",content:"",guild_id:"0000000"}}),s.dispatch({type:"MESSAGE_DELETE",message:{channel_id:"",id:""}});const t=s._orderedActionHandlers.MESSAGE_DELETE.find(i=>i.name==="MessageStore"),r=s._orderedActionHandlers.MESSAGE_UPDATE.find(i=>i.name==="MessageStore");o.before(t,"actionHandler",(i,e)=>{const n=d.getMessage(e[0].channelId,e[0].id);if(e[0]={},!n.editedTimestamp||n.editedTimestamp._isValid){const c={type:"MESSAGE_UPDATE",message:{...n,edited_timestamp:"invalid_timestamp",content:n.content+" `[deleted]`",guild_id:M.getChannel(n.channel_id).guild_id}};s.dispatch(c)}}),o.before(r,"actionHandler",(i,e)=>{try{const n=d.getMessage(e[0].message.channel_id,e[0].message.id);try{if(!e[0].edited_timestamp._isValid)return}catch{}e[0].message.content=n.content+" `[edited]`\n"+e[0].message.content;return}catch{}})},onStop(){o.unpatchAll()}};g(S);
