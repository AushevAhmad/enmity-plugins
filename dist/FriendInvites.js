function I(e){window.enmity.plugins.registerPlugin(e)}function B(e){return window.enmity.plugins.installPlugin(e)}var R="FriendInvites",D="1.0.0",$="Easily create a Discord friend invite link to make it easier for users to add you as a friend",U=[{name:"spin",id:"308440976723148800"}],M="#ff0069",L="https://raw.githubusercontent.com/spinfal/enmity-plugins/master/dist/FriendInvites.js",F={name:R,version:D,description:$,authors:U,color:M,sourceUrl:L},b;(function(e){e[e.BuiltIn=0]="BuiltIn",e[e.Guild=1]="Guild",e[e.DM=2]="DM"})(b||(b={}));var m;(function(e){e[e.Chat=1]="Chat",e[e.User=2]="User",e[e.Message=3]="Message"})(m||(m={}));var w;(function(e){e[e.BuiltIn=0]="BuiltIn",e[e.BuiltInText=1]="BuiltInText",e[e.BuiltInIntegration=2]="BuiltInIntegration",e[e.Bot=3]="Bot",e[e.Placeholder=4]="Placeholder"})(w||(w={}));var x;(function(e){e[e.Role=1]="Role",e[e.User=2]="User"})(x||(x={}));var g;(function(e){e[e.SubCommand=1]="SubCommand",e[e.SubCommandGroup=2]="SubCommandGroup",e[e.String=3]="String",e[e.Integer=4]="Integer",e[e.Boolean=5]="Boolean",e[e.User=6]="User",e[e.Channel=7]="Channel",e[e.Role=8]="Role",e[e.Mentionnable=9]="Mentionnable",e[e.Number=10]="Number",e[e.Attachment=11]="Attachment"})(g||(g={}));var k;(function(e){e[e.ApplicationCommand=2]="ApplicationCommand",e[e.MessageComponent=3]="MessageComponent"})(k||(k={}));function h(...e){return window.enmity.modules.getByKeyword(...e)}window.enmity.modules.common;function d(e,o,r,s){window.enmity.clyde.sendReply(e,o,r,s)}const N={id:"create-friend-invite",name:"createinvite",displayName:"createinvite",description:"Create a friend invite link",displayDescription:"Create a friend invite link",type:m.Chat,inputType:w.BuiltInText,options:[{name:"whisper",displayName:"whisper",description:"Only you can see the response",displayDescription:"Only you can see the response",type:g.Boolean,required:!1}],execute:async function(e,o){var r,s,a,l;const c=e[e.findIndex(i=>i.name==="whisper")];try{const i=await h("friendinvite").createFriendInvite().then(t=>t);if(i)if((r=c==null?void 0:c.value)==null||r){d((s=o==null?void 0:o.channel.id)!=null?s:"0",`Your friend invite link is: discord.gg/${i.code}
Max uses: ${i.max_uses}
Expires: <t:${new Date(i.expires_at).getTime()/1e3}:R>`);return}else return{content:`discord.gg/${i.code}`};else console.log("[ createFriendInvite Response ]",i),d((a=o==null?void 0:o.channel.id)!=null?a:"0","Something went wrong, please try again later. Fetch response sent to console.")}catch(i){console.log("[ createFriendInvite Error ]",i),d((l=o==null?void 0:o.channel.id)!=null?l:"0","An error occured while creating the friend invite. Check debug logs for more info.")}}},P={id:"list-friend-invites",name:"listinvites",displayName:"listinvites",description:"List your current friend invite links",displayDescription:"List your current friend invite links",type:m.Chat,inputType:w.BuiltInText,options:[{name:"whisper",displayName:"whisper",description:"Only you can see the response",displayDescription:"Only you can see the response",type:g.Boolean,required:!1}],execute:async function(e,o){var r,s,a,l,c;const i=e[e.findIndex(t=>t.name==="whisper")];try{const t=await h("friendinvite").getAllFriendInvites().then(f=>f);if(t){const f={type:"rich",title:"Friend Invites",description:t.length==0?"You have no friend invites!":`${t.map(u=>`\`discord.gg/${u.code}\` - uses: ${u.uses}/${u.max_uses} - expires <t:${new Date(u.expires_at).getTime()/1e3}:R>`).join(`
`)}`,footer:{text:"Friend invites are mostly undocumented and any of these features may break at any time."},color:"0xff0069"};if((r=i==null?void 0:i.value)==null||r){d((s=o==null?void 0:o.channel.id)!=null?s:"0",{embeds:[f]});return}else if(t.length==0){d((a=o==null?void 0:o.channel.id)!=null?a:"0","You have no friend invites!");return}else return{content:`${t.map(u=>`\`discord.gg/${u.code}\` - uses: ${u.uses}/${u.max_uses} - expires <t:${new Date(u.expires_at).getTime()/1e3}:R>`).join(`
`)}`}}else console.log("[ listFriendInvites Response ]",t),d((l=o==null?void 0:o.channel.id)!=null?l:"0","Something went wrong, please try again later. Fetch response sent to console.")}catch(t){console.log("[ listFriendInvites Error ]",t),d((c=o==null?void 0:o.channel.id)!=null?c:"0","An error occured while fetching and listing friend invites. Check debug logs for more info.")}}},E={id:"revoke-friend-invites",name:"revokeinvites",displayName:"revokeinvites",description:"Revoke all of your friend invites (this is irreversible and will delete all of your friend invites)",displayDescription:"Revoke all of your friend invites (this is irreversible and will delete all of your friend invites)",type:m.Chat,inputType:w.BuiltInText,execute:async function(e,o){var r,s,a;try{await h("friendinvite").revokeFriendInvites();const l=await h("friendinvite").getAllFriendInvites().then(c=>c);if(l.length==0){d((r=o==null?void 0:o.channel.id)!=null?r:"0","All of your friend invites have been revoked.");return}else console.log("[ revokeFriendInvites Response ]",l),d((s=o==null?void 0:o.channel.id)!=null?s:"0","Something went wrong, please try again later. Fetch response sent to console.")}catch(l){console.log("[ revokeFriendInvites Error ]",l),d((a=o==null?void 0:o.channel.id)!=null?a:"0","An error occured while revoking friend invites. Check debug logs for more info.")}}},V=[N,P,E];window.enmity.modules.common.Constants,window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const y=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage,window.enmity.modules.common.Toasts;const _=window.enmity.modules.common.Dialog;window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users,window.enmity.modules.common.Navigation,window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking,window.enmity.modules.common.StyleSheet,window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes;const{components:n}=window.enmity;n.Alert,n.Button,n.FlatList,n.Image,n.ImageBackground,n.KeyboardAvoidingView,n.Modal,n.Pressable,n.RefreshControl;const G=n.ScrollView;n.SectionList,n.StatusBar,n.StyleSheet,n.Switch,n.Text,n.TextInput,n.TouchableHighlight,n.TouchableOpacity,n.TouchableWithoutFeedback,n.Touchable,n.View,n.VirtualizedList,n.Form,n.FormArrow,n.FormCTA,n.FormCTAButton,n.FormCardSection,n.FormCheckbox,n.FormDivider,n.FormHint,n.FormIcon,n.FormInput,n.FormLabel,n.FormRadio;const S=n.FormRow;n.FormSection,n.FormSelect,n.FormSubLabel,n.FormSwitch,n.FormTernaryCheckBox,n.FormText,n.FormTextColors,n.FormTextSizes;const{native:v}=window.enmity;function j(){v.reload()}v.version,v.build,v.device,v.version;var Y=({pluginUrl:e})=>y.createElement(S,{label:"Update Plugin",trailing:S.Arrow,onPress:()=>{console.log(e),B(`${e}?${Math.floor(Math.random()*1001)}.js`),_.show({title:"Plugin Update",body:"Updating the plugin using this button will require you to reload Discord. Would you like to reload Discord now?",confirmText:"Yep!",cancelText:"Later",onConfirm:j})}});const q={...F,onStart(){this.commands=V},onStop(){this.commands=[]},patches:[],getSettingsPanel({settings:e}){return y.createElement(G,{settings:e},y.createElement(Y,{pluginUrl:F.sourceUrl}))}};I(q);
