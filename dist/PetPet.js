function R(e){window.enmity.plugins.registerPlugin(e)}function I(e){return window.enmity.plugins.installPlugin(e)}var M="PetPet",N="1.0.0",L="Generate a petpet gif from a given image",k=[{name:"spin",id:"308440976723148800"}],G="#ff0069",z="https://raw.githubusercontent.com/spinfal/enmity-plugins/master/dist/PetPet.js",P={name:M,version:N,description:L,authors:k,color:G,sourceUrl:z},x;(function(e){e[e.BuiltIn=0]="BuiltIn",e[e.Guild=1]="Guild",e[e.DM=2]="DM"})(x||(x={}));var f;(function(e){e[e.Chat=1]="Chat",e[e.User=2]="User",e[e.Message=3]="Message"})(f||(f={}));var v;(function(e){e[e.BuiltIn=0]="BuiltIn",e[e.BuiltInText=1]="BuiltInText",e[e.BuiltInIntegration=2]="BuiltInIntegration",e[e.Bot=3]="Bot",e[e.Placeholder=4]="Placeholder"})(v||(v={}));var B;(function(e){e[e.Role=1]="Role",e[e.User=2]="User"})(B||(B={}));var l;(function(e){e[e.SubCommand=1]="SubCommand",e[e.SubCommandGroup=2]="SubCommandGroup",e[e.String=3]="String",e[e.Integer=4]="Integer",e[e.Boolean=5]="Boolean",e[e.User=6]="User",e[e.Channel=7]="Channel",e[e.Role=8]="Role",e[e.Mentionnable=9]="Mentionnable",e[e.Number=10]="Number",e[e.Attachment=11]="Attachment"})(l||(l={}));var U;(function(e){e[e.ApplicationCommand=2]="ApplicationCommand",e[e.MessageComponent=3]="MessageComponent"})(U||(U={}));function q(...e){return window.enmity.modules.getByProps(...e)}function $(...e){return window.enmity.modules.getByKeyword(...e)}window.enmity.modules.common;function c(e,n,u,m){window.enmity.clyde.sendReply(e,n,u,m)}const V={id:"petpet-command",name:"petpet",displayName:"petpet",description:"Generate a petpet gif from a given image",displayDescription:"Generate a petpet gif from a given image",type:f.Chat,inputType:v.BuiltInText,options:[{name:"url",displayName:"url",description:"The URL of the image to petpet",displayDescription:"The URL of the image to petpet",type:l.String,required:!1},{name:"user",displayName:"user",description:"Grab a user's avatar to petpet",displayDescription:"Grab a user's avatar to petpet",type:l.User,required:!1},{name:"size",displayName:"size",description:"Change the size of the petpet gif. Max is 512. Defaults to 100, higher values equal larger files and potentially no Discord embeds",displayDescription:"Change the size of the petpet gif. Max is 512. Defaults to 100, higher values equal larger files and potentially no Discord embeds",type:l.Integer,required:!1},{name:"delay",displayName:"delay",description:"The delay between each frame, defaults to 20",displayDescription:"The delay between each frame, defaults to 20",type:l.Integer,required:!1},{name:"whisper",displayName:"whisper",description:"Only you can see the result",displayDescription:"Only you can see the result",type:l.Boolean,required:!1}],execute:async function(e,n){var u,m,b,F,S;const r=e[e.findIndex(t=>t.name==="url")],s=e[e.findIndex(t=>t.name==="user")],i=e[e.findIndex(t=>t.name==="size")],w=e[e.findIndex(t=>t.name==="delay")],d=e[e.findIndex(t=>t.name==="whisper")];if(!r&&!s)return c((u=n==null?void 0:n.channel.id)!=null?u:"0","No argument provided, nothing will happen. Here's a banana instead \u{1F34C}");try{const t=await $("fetch").fetch(`https://petpet-api.clit.repl.co/petpet?url=${r!=null&&r.value?r.value:q("getUser").getUser(s==null?void 0:s.value).getAvatarURL().split("?")[0].replace(/gif|webp/,"png")}&size=${i?i.value:100}&delay=${w?w.value:20}`,{headers:{"X-Target":r!=null&&r.value?r.value:s==null?void 0:s.value}}).then(h=>h.json()),g=`https://s3.us-east-1.wasabisys.com/e-zimagehosting/ff6c0246-6f99-4a98-b2f0-d30e5e27ebc0/${t==null?void 0:t.result.split("/").pop()}`;if(console.log("[ PetPet Arguments ]",r,s,i,w,d),t.status==!0){const h={type:"rich",image:{proxy_url:g,url:g,width:i?i.value:100,height:i?i.value:100},footer:{text:`Files are purged every 2 weeks \u2022 Powered by ${t==null?void 0:t.github}`},color:"0xff0069"};if((m=d==null?void 0:d.value)==null||m){c((b=n==null?void 0:n.channel.id)!=null?b:"0",{embeds:[h]});return}else return{content:g}}else console.log("[ PetPet Fetch Response ]",t,t==null?void 0:t.status),console.log("[ PetPet Arguments ]",r,s,d),c((F=n==null?void 0:n.channel.id)!=null?F:"0","Something went wrong, please try again later. Fetch response and PetPet arguments sent to console.")}catch(t){console.log("[ PetPet Error ]",t),c((S=n==null?void 0:n.channel.id)!=null?S:"0","An error occured while fetching and preparing the petpet image. Check debug logs for more info.")}}},E=[V];window.enmity.modules.common.Constants,window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const y=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage,window.enmity.modules.common.Toasts;const j=window.enmity.modules.common.Dialog;window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users,window.enmity.modules.common.Navigation,window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking,window.enmity.modules.common.StyleSheet,window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes;const{components:o}=window.enmity;o.Alert,o.Button,o.FlatList,o.Image,o.ImageBackground,o.KeyboardAvoidingView,o.Modal,o.Pressable,o.RefreshControl;const H=o.ScrollView;o.SectionList,o.StatusBar,o.StyleSheet,o.Switch,o.Text,o.TextInput,o.TouchableHighlight,o.TouchableOpacity,o.TouchableWithoutFeedback,o.Touchable,o.View,o.VirtualizedList,o.Form,o.FormArrow,o.FormCTA,o.FormCTAButton,o.FormCardSection,o.FormCheckbox,o.FormDivider,o.FormHint,o.FormIcon,o.FormInput,o.FormLabel,o.FormRadio;const D=o.FormRow;o.FormSection,o.FormSelect,o.FormSubLabel,o.FormSwitch,o.FormTernaryCheckBox,o.FormText,o.FormTextColors,o.FormTextSizes;const{native:a}=window.enmity;function K(){a.reload()}a.version,a.build,a.device,a.version;var W=({pluginUrl:e})=>y.createElement(D,{label:"Update Plugin",trailing:D.Arrow,onPress:()=>{console.log(e),I(`${e}?${Math.floor(Math.random()*1001)}.js`),j.show({title:"Plugin Update",body:"Updating the plugin using this button will require you to reload Discord. Would you like to reload Discord now?",confirmText:"Yep!",cancelText:"Later",onConfirm:K})}});const X={...P,onStart(){this.commands=E},onStop(){this.commands=[]},patches:[],getSettingsPanel({settings:e}){return y.createElement(H,{settings:e},y.createElement(W,{pluginUrl:P.sourceUrl}))}};R(X);
